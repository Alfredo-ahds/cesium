<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">  <!-- Use Chrome Frame in IE -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <meta name="description" content="A simple KML example.">
    <meta name="cesium-sandcastle-labels" content="Showcases, DataSources">
    <title>Camera control</title>
    <script type="text/javascript" src="Sandcastle-header.js"></script>
	<script src="../../../../Build/Cesium/Cesium.js"></script>
</head>
<body class="sandcastle-loading" data-sandcastle-bucket="bucket-requirejs.html">
<style>
    @import url(../../../Sandcastle/templates/bucket.css);
</style>
<div id="cesiumContainer" class="fullSize"></div>
<div id="loadingOverlay"><h1>Loading...</h1></div>
<div id="Sources"></div>
<div id="Latitude"></div>
<div id="Longitude"></div>
<div id="Altitude"></div>
<div id="Heading"></div>
<div id="Pitch"></div>
<div id="Roll"></div>


<script id="cesium_sandcastle_script">
function startup(Cesium) {
	
	var viewer = new Cesium.Viewer('cesiumContainer', {
		animation : false,
		baseLayerPicker : false,
		fullscreenButton : false,
		geocoder : false,
		homeButton : false,
		sceneModePicker : false,
		timeline : false,
		navigationHelpButton : false
	});
	
	Sandcastle.addTextField('Lat', 'Latitude');
	Sandcastle.addTextField('Long', 'Longitude');
	Sandcastle.addTextField('Alt', 'Altitude');
	Sandcastle.addTextField('Head', 'Heading');
	Sandcastle.addTextField('Pit', 'Pitch');
	Sandcastle.addTextField('Ro', 'Roll');
	
	Sandcastle.addToolbarButton('Submit data', function() {
		console.log("Button pressed");
		var latitude = document.getElementById('Lat').value;
		var longitude = document.getElementById("Long").value;
		var altitude = document.getElementById("Alt").value;
		var heading = document.getElementById('Head').value;
		var pitch = document.getElementById("Pit").value;
		var roll = document.getElementById("Ro").value;
		
		viewer.camera.flyTo({
			destination : Cesium.Cartesian3.fromDegrees(longitude, latitude, altitude), 
			orientation : {
				heading : Cesium.Math.toRadians(heading),
				pitch : Cesium.Math.toRadians(pitch),
				roll : roll
			},
			duration : 3.0});
	}, 'Sources');
	
	viewer.dataSources.add(Cesium.KmlDataSource.load('../Resources/coverage0.kmz')).then(function(dataSource) {
		viewer.flyTo(dataSource.entities.values[0]);
	});
	
	Sandcastle.finishedLoading();
	
}

if (typeof Cesium !== "undefined") {
    startup(Cesium);
} else if (typeof require === "function") {
    require(["Cesium"], startup);
}

</script>
</body>
</html>
